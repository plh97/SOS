# This configuration file was automatically generated by Gitpod.
# Please adjust to your needs (see https://www.gitpod.io/docs/introduction/learn-gitpod/gitpod-yaml)
# and commit this file to your remote git repository to share the goodness with others.

# Learn more from ready-to-use templates: https://www.gitpod.io/docs/introduction/getting-started/quickstart




image:
  file: .gitpod.Dockerfile

tasks:
  - name: Setup Oh My Zsh
    command: |
      # 非交互式安装 Oh My Zsh（跳过自动切换 Shell）
      sh -c "$(curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)" "" --unattended
      # 强制将 Zsh 设为默认 Shell（需容器支持）
      sudo chsh -s $(which zsh) gitpod
      # 备份并替换默认 .zshrc（可选）
      cp ~/.zshrc ~/.zshrc.orig && cp -f $HOME/dotfiles/.zshrc ~/.zshrc


  - name: run frontend
    openMode: split-left
    init: pnpm install
    command: pnpm run dev

  - name: run backend
    openMode: split-right
    init: pnpm install
    command: pnpm run db

ports:
  - port: 9001
    name: frontend
    visibility: private
    # onOpen: open-preview
